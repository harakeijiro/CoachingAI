画面設計書（CoachingAI｜OAuth版）

本ドキュメントは要件定義に基づき、UIレイアウト、主要コンポーネント、状態遷移、ルーティング、エラーハンドリングを定義する。
認証は Supabase Auth の External OAuth（Google／Microsoft）のみを利用する。

0. 前提・共通仕様

共通ヘッダー
左：ロゴ（トップへ）。右：未ログイン時は「新規登録」「ログイン」。ログイン後は「設定」「ログアウト」「対話へ」。

共通フッター
規約、プライバシー、問い合わせ。

レスポンシブ、アクセシビリティ、トースト／モーダル指針は従来どおり。

3D描画と Cartesia TTS 同期、記憶最適化 UI は従来どおり。

1. ランディングページ（トップ）

1-1. 全体トーンとコンセプト

コンセプトキーワード（刷新）

「話すことで、心が動く。」
（“AIと終わりのない対話を”よりも感情に訴え、ナチュラルで上品）

トーン

モード系の静けさ（白＋黒＋インディゴをベース）

シンプルで、映像が主役

“説明”ではなく“感じる”デザイン

1-2. ヘッダー（常時固定・極シンプル）

構成

左：ロゴ（CoachingAI）

テキストロゴ＋淡いグラデーション（インディゴ〜パープル）

右：

「ログイン」リンク（細字）

「無料で始める」ボタン（インディゴ塗り・角丸）

補足

背景は透明＋ブラー（動画背景の上に浮く）

スクロール時に白背景に変化して固定される（ミニマル感）

1-3. メインセクション（ヒーロー＋3テーマ融合）
🎯目的

ユーザーが「感情→理解→行動」を一度の視覚体験で完結できるようにする。

🖥 レイアウト構成
| 左半分：動画領域（9秒ループ） | 右半分：テーマテキスト＋CTA |

🎬 左側（映像ゾーン）
仕様

9秒ループ動画（3テーマ × 各3秒）

🌱 メンタル → 💌 恋愛 → 💼 キャリア → 戻る

すべて“同一空間”のトーンで撮影（つながりを演出）

動画内の演出案：

動画は
テーマ	画トーン	内容例	カメラ
🌱 メンタル	柔らかい白＋青緑	AIと話す人が深呼吸して微笑む	ゆっくりズームイン
💌 恋愛	ピンクトーン＋夜光	メッセージを見て少し照れる	手元クローズアップ
💼 キャリア	青＋朝光	コーヒーを飲みながらパソコンに向かう	横からスライドショット

テーマが切り替わるごとに右側テキストもスムーズに入れ替わる。

BGMは連続したアンビエント音。
切り替えが“感情の波”のように感じられる。

📝 右側（テキストゾーン）
各テーマごとに切り替わる構成：

（動画と同期してフェード or スライドで変化）

🌱 メンタル・自己理解
h1：考えすぎる日も、AIが整理してくれる。
p：言葉にすることで、気持ちが整う。あなたの心のリズムに寄り添うAIコーチ。

💌 恋愛・パートナーシップ
h1：伝えたい想いを、やさしく言葉に。
p：恋愛や人間関係の悩みも、AIが一緒に考えてくれる。心が軽くなる対話体験を。

💼 キャリア・目標達成
h1：迷っても、次の一歩が見える。
p：キャリアや自己成長の壁を、AIが整理してくれる。今日の決断を、確かな一歩に。

共通下部に：

CTAボタン：「AIと話してみる（無料）」

（固定配置・アニメーションせず、安定感を優先）

💡 補足演出アイデア（この構成で映える）

背景全体にゆるいグラデーションアニメーション
→ メンタル（青緑）→ 恋愛（桃色）→ キャリア（青紫）

切り替え時にテキスト右上に**小さなインジケーター（●●●）**が光る
→ 現在のテーマを示すガイド

マウススクロールで動画が一時停止 → CTAが浮き出る（自然な誘導）

1-4. ミニ解説セクション（補助テキスト＋信頼感）
目的：

感情体験の直後に「サービス理解」と「安心」を与える。

構成：

タイトル：

「AIと話す。それだけで、少し前に進める。」

サブ：

「CoachingAIは、あなた専用のAIコーチ。心・恋愛・キャリア、すべての対話を支える存在です。」

3つのアイコン（静止型）：

🤖 パーソナライズされたコーチング

💬 自然な会話体験

📈 継続的なサポート

1-5. 最終CTAセクション（締め）

背景：先ほどの動画の「最後のキャリアのカット」を静止化して使用。
キャッチ：

「話すことで、心が整う。」
サブ：
「1分で始められる、AIとのパーソナルコーチング。」
ボタン：
「AIと話してみる（無料）」

1-6. フッター（最小限）

ロゴ＋コピー「CoachingAI — 言葉にすることで、前に進める。」

リンク群：利用規約／プライバシー／ヘルプ／ログイン／登録

背景：黒 or 深いグレー


2.1 新規登録（OAuth 選択）

目的
外部プロバイダでアカウントを作成する。

ルート
/signup

レイアウト
中央に「アカウント作成」の見出しと説明。下に3つのボタン。入力フォームは存在しない。

要素
「Google で続行」
「Microsoft で続行」
「すでにアカウントをお持ちの方：ログインへ」リンク

動作
各ボタン押下で Supabase Auth の該当プロバイダ OAuth フローを起動（ポップアップ優先、失敗時はリダイレクト）。
初回ログイン後は /onboarding へ遷移。二回目以降は /chat。

エラー
ユーザーが同意を拒否：トーストで中断を通知し再試行導線。
ポップアップブロック：リダイレクト方式に自動切替し再試行案内。
リダイレクトURI不一致や設定不備：設定不備メッセージと問い合わせ導線。
サードパーティ Cookie 制限：ブラウザ設定ガイドリンクを提示。

2.3 ログイン（OAuth 選択）

目的
既存ユーザーが認証する。新規と同じ UI 構造で、文言のみ「ログイン」に変更。

ルート
/signin

要素
「Google で続行」
「Microsoft で続行」
「はじめての方：新規登録へ」リンク

動作・エラー
新規登録と同様。

2.4 導入オンボーディング（初回）

目的
初回のみ、コーチングの初期精度を高める設定を収集する。

ルート
/onboarding（認証必須）

ステップ
コーチングスタイル選択（励まし／論理／共感）
目標設定（短期、長期、期限）
通知タイミング（時間帯、頻度）
記憶方針（重要のみ保存／自動要約保存／保存しない）

完了時
/chat へ遷移。

2.5 対話（3Dキャラクター×コーチング）

目的
3Dキャラクターと対話し、コーチングを行う。

ルート
/chat（認証必須）

レイアウト
メイン：3D表示（待機モーション、表情、ジェスチャー、Cartesia TTS 同期）。
下部：テキスト入力、送信、音声入力開始／停止（現状 Web Speech API、将来 Whisper 切替可）。
上部サブバー：セッション名、重要保存トグル。
右下：ミニ設定（音量、読み上げ、マイク）。

状態・エラー
マイク拒否時はテキスト案内。TTS失敗時はテキストのみ。3D失敗時は静的代替。

記憶最適化
セッション終了時に「要約プレビュー」を提示し、保存方針を選択可能。要約は編集可。

2.6 設定

目的
表示、音声、AI、記憶、アカウントの設定。

ルート
/settings（認証必須）

セクションと要素
表示：キャラクターサイズ、透明度、位置。
音声：Cartesia の声質（ボイスID）、音量、読み上げON/OFF、話速。
AI：応答速度、スタイル（丁寧／カジュアル）、メインLLM（Gemini／GPT）。
記憶：保存方針、保存期間、対象（目標／行動パターン／感情傾向／提案履歴）、手動削除、エクスポート。
アカウント：現在のログインメール（取得可能な範囲で表示）、連携プロバイダ一覧、連携の追加、既定プロバイダの切替、連携解除、ログアウト、退会。
（メール変更／パスワード変更は存在しない）

注意
複数プロバイダのリンク・解除時は確認ダイアログを表示。解除でログイン不能になるケースは警告を強調。

2.7 コーチング履歴

目的
要約ベースのセッションを検索・閲覧・編集・エクスポート。

ルート
/历史 or /history（認証必須、表記は /history を想定）

機能
検索、期間フィルタ、重要フラグフィルタ。
カード一覧（タイトル、日付、主要学び、次の一手）。
詳細表示（要約編集、重要切替、削除、エクスポート、要約を文脈に再読み込みして /chat へ）。

2.8 プライバシーとデータ管理

目的
保存方針の可視化、サイズ概算、エクスポート、削除、匿名化。

ルート
/privacy（認証必須）

機能
現在の保存方針・期間の表示。データサイズ概算。JSON/CSV エクスポート。全削除（2段階確認）。匿名化設定。

2.9 エラーページ

ルート
/404、/500

要素
状況説明、トップへ、サポートへ。

3. ルーティングとガード

/ は未ログインにランディング、ログイン済みは /chat へリダイレクト。

/signup, /signin は未ログインのみ。ログイン済みは /chat へ。

/onboarding, /chat, /settings, /history, /privacy は認証必須。

/password-reset は廃止。

Supabase Auth のセッションはリロードでも維持。

4. 入力バリデーションとメッセージ

入力フォームがないため、主に OAuth フローの結果をユーザーに明示する。

拒否、中断、設定不備はトースト／モーダルで説明と再試行導線。

連携解除などの破壊的操作は二段階確認。

5. 状態管理と永続化

対話の一時状態（入力、録音、思考中）をクライアントで保持。

セッション要約＋重要フラグを Supabase に保存（RLS）。

設定はユーザー単位でサーバ保存。

OAuth 連携状態は Supabase Auth のユーザー情報を基準に表示。

6. 認証まわりの実装ノート

Supabase Auth：Google／Microsoft を有効化。

リダイレクトURIを本番・ステージング・ローカルで登録。

state／nonce／PKCE を有効化（Supabase SDK 既定の安全策を使用）。

同一メールの別プロバイダ利用時のアカウントリンク方針

既定：メール一致時は同一アカウントへリンク（安全のためメール検証またはユーザー確認ダイアログを挟む）。

例外：プロバイダ側がメール非公開の場合は明示的に統合確認を行う。

ポップアップ不可時はリダイレクト方式に自動切替。

サードパーティ Cookie 制限への案内文を用意。

7. 非機能UI要件

初回起動から5秒以内に3D待機表示。

入力から3秒以内に応答の先頭トークンを表示（ストリーミング）。

回線不良時は簡易モードにフォールバック。

8. 分析・ログ（PIIを含まない）

発火ポイント：OAuth 成功／失敗、オンボーディング完了、対話開始、音声開始・停止、TTS再生、セッション保存、設定変更。

匿名IDで記録し、個人特定情報は送信しない。