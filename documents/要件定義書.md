CoachingAI 開発プロジェクト 要件定義書
1. 概要

「CoachingAI」は、ユーザーが Blender で作成した 3D キャラクターを活用し、AI によるパーソナルコーチングを提供するインタラクティブな AI コンパニオンシステムである。
キャラクターは音声・表情・動きを通じて自然なコミュニケーションを行い、ユーザーの目標達成、習慣形成、モチベーション維持を支援する。
本システムは、リアルタイム 3D アニメーションと LLM（大規模言語モデル）を組み合わせ、ユーザーが「心でつながれる AI パートナー」と感じられる体験を目指す。

開発環境は Cursor IDE を使用し、フロントエンドからバックエンドまで Next.js・Supabase・Vercel AI SDK を中核に構築する。

2. プロジェクトの目的

パーソナルコーチングの実現
ユーザーの目標、行動、感情を理解し、コーチング理論に基づいた助言と対話を行う。

自然なコミュニケーションの実現
音声認識、音声合成、感情理解を組み合わせ、より人間的で親しみやすい対話を実現する。

3Dインタラクションの強化
表情や動作による非言語的コミュニケーションを導入し、キャラクターに生命感を与える。

パーソナライズ体験の提供
ユーザーの特徴、目標、嗜好を記憶し、個別最適化されたコーチングを提供する。

記憶効率の最適化
過去の会話全体を保持せず、重要要素（目標、感情傾向、習慣変化、学習内容）のみを抽出して記録し、不要な履歴は自動的に破棄する。

3. 機能要件
3.1 対話・コーチング機能

テキスト対話
ユーザー入力に対して自然言語で応答する。

音声対話
Whisper による音声認識を行い、Cartesia TTS により自然な音声で応答する。

文脈理解
会話履歴を短く要約して保持し、会話の流れを維持する。

感情分析
発話トーンやテキスト内容から感情を推定し、喜怒哀楽などを応答や表情に反映する。

パーソナリティ設定
励まし型、論理型、共感型などの性格タイプをユーザーが選択でき、一貫した応答スタイルを維持する。

コーチングモード
対話の中で「目標設定 → 現状分析 → 行動提案 → 振り返り → 再設定」の流れを AI がガイドする。

記憶最適化
以下のデータのみを要約して保持する。
① ユーザーの目標と達成度
② 行動パターン（成功・停滞要因）
③ 感情傾向（モチベーション低下の要因など）
④ AI が生成した提案・助言の履歴
これ以外の会話データは自動的に削除する。

3.2 3Dキャラクター表現機能

モデル表示
Blender で作成した 3D モデルを Web 上でリアルタイム表示する。

アニメーション制御
会話内容に応じて頷き、手振り、笑顔などの動作を再生する。

表情変化
感情データに基づき、目・眉・口の動きを制御して表情を変化させる。

リップシンク
Cartesia TTS の音声波形データに同期して、口の動きを自動で制御する。

コーチング演出
励ますときは前のめりになる、考えるときは顎に手を当てるなど、状況に応じたモーションを再生する。

感情演出
背景の光や色調を変化させ、キャラクターの状態を視覚的に表現する。

3.3 コーチング支援機能

目標設定支援
SMART原則（具体的・測定可能・達成可能・関連性・期限）に基づいた目標設定をサポートする。

セッション要約
各コーチングセッションを短く要約して保存し、後で振り返りに利用できるようにする。

フィードバック生成
達成度や感情に応じて励ましや提案を自動生成する。

リマインダー
行動促進や目標達成のためのリマインダーを通知する。

成長トラッキング
行動データや感情変化を分析し、継続率や傾向を可視化する。

3.4 記憶・システム管理機能

記憶制御
要約ベースでの記憶方式を採用し、重要情報のみを永続化する。

データ永続化
Supabase PostgreSQL に暗号化して保存し、RLS（Row Level Security）でユーザーごとにデータを保護する。

プライバシー保護
個人を特定する情報はローカルで匿名化して保存する。

外部 API 連携
必要に応じて天気、ニュース、スケジュール管理などと連携できるようにする。

4. 非機能要件

パフォーマンス
アプリ起動から5秒以内にキャラクターを表示し、入力後3秒以内に応答を返す。

可用性
オフライン動作に一部対応し、オンライン時に Supabase と同期する。

安定性
メモリ使用量を最小限に抑えるため、会話履歴は要約データのみ保持する。

セキュリティ
Supabase Auth による認証を行い、データは暗号化・分離管理する。

UI/UX
キャラクターの表示位置や透明度を調整できる設定を用意し、ユーザーの集中を妨げない。

開発環境
Cursor IDE を使用し、バージョン管理は Git、パッケージ管理は Yarn を使用する。

5. 技術スタック
フロントエンド技術

フレームワーク: Next.js (v15.5.4)

言語: TypeScript (^5)

UI: React (v19.1.0)

スタイリング: Tailwind CSS (^4)

3D表示: Three.js (^0.180.0)

3D連携: React Three Fiber (^9.3.0)

3D補助ライブラリ: React Three Drei (^10.7.6)

AI・音声技術

メインLLM: Google Gemini API

代替LLM: OpenAI API (GPT-5, GPT-4, GPT-3.5)

AI統合: Vercel AI SDK

音声合成: Cartesia TTS

音声認識: Whisper（実装予定）

データベース・認証

データベース: Supabase PostgreSQL

認証: Supabase Auth

クライアント連携: Supabase Client SDK

セキュリティ: Row Level Security (RLS)

デプロイメント・開発環境

デプロイ: Vercel（本番・ステージング環境）

IDE: Cursor

バージョン管理: Git

パッケージ管理: Yarn

6. 成果物

CoachingAI Webアプリケーション本体

3Dキャラクター表示、音声対話、コーチング機能を統合したアプリケーション。

ソースコード一式

Next.js、Supabase、Vercel AI SDK、Cartesia TTS による実装。

開発ドキュメント

要件定義書、データベース設計書、API設計書、セットアップガイド。